---
layout: compress
---
<div class="shell">
    <section class="main">
        <h2>Your subscription, {(currentUser.username)}</h2>
        <section class="subscription">
            <h3>Details</h3>
            <ul>
                <li>You signed up with Dewy on <strong>{(currentUser.created*1000 | date:'MMMM d, yyyy')}</strong></li>
                <li ng-if="!currentUser.subscription.expired">You are on the <strong>{(currentUser.subscription.type)}</strong> plan</li>
                <li ng-if="currentUser.subscription.expired">Your subscription expired <strong>{(currentUser.subscription.endDate*1000 | date:'MMMM d, yyyy')}</strong></li>
                <li ng-if="!currentUser.subscription.expired">Your subscription expires <strong>{(currentUser.subscription.endDate*1000 | date:'MMMM d, yyyy')}</strong></li>
            </ul>
        </section>
<!--         <section class="checkout">
            <h3>Payment via Checkout</h3>
            <form action="{(stripeEndPoint)}" method="POST">
                <script
                    src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                    data-key="{(stripePublicKey)}"
                    data-name="Dewy"
                    data-description="Basic subscription"
                    data-amount="3999"
                    data-label="Sign Me Up!" >
                </script>
            </form>
        </section> -->
        <section class="card" ng-if="customer.default_source.last4">
            <h3>Card on file</h3>
            <p ng-if="!customer.error">Dewy is using the credit card ending with <strong>{(customer.default_source.last4)}</strong></p>
        </section>
        <section class="subscribe">
            <h3 ng-show="!currentUser.subscription.subscriptionID">Start your subscription</h3>
            <form stripe:form="saveCustomer"  ng-show="!currentUser.subscription.subscriptionID">
                <div class="plans" ng-include="'templates/subscription_plans.html'">
                </div>
                <span class="payment-errors"></span>
                <fieldset>
                    <div class="field">
                        <label>Card Number</label>
                        <input type="text" maxlength="20" data-stripe="number">
                    </div>

                    <div class="field">
                        <label>Expiration</label>
                        <input type="text" maxlength="2" data-stripe="exp-month" placeholder="MM" class="month">
                        <input type="text" maxlength="2" data-stripe="exp-year" placeholder="YY" class="year">
                    </div>

                    <div class="field">
                        <label>CVC</label>
                        <input type="text" maxlength="4" data-stripe="cvc" class="cvc">
                    </div>
                    <span class="error" ng-show="error">{( error )}</span>
                    <button type="submit" ng-disabled="disabled">Start your {(plan)} plan<i class="fa fa-credit-card-alt" aria-hidden="true"></i></button>
                </fieldset>
            </form>
            <h3 ng-show="currentUser.subscription.subscriptionID">Change your subscription</h3>
            <form ng-show="currentUser.subscription.subscriptionID">
                <div class="plans" ng-include="'templates/subscription_plans.html'">
                </div>
                <span class="payment-errors"></span>
                <fieldset>
                    <button type="submit" ng-disabled="disabled">Change to {(plan)} plan<i class="fa fa-credit-card-alt" aria-hidden="true"></i></button>
                    <button type="submit" ng-disabled="disabled">Cancel plan at period end<i class="fa fa-credit-card-alt" aria-hidden="true"></i></button>
                </fieldset>
            </form>
    </section>
</div>