---
layout: compress
---
<div class="shell">
    <section class="main">
        <h2>Your subscription, {(currentUser.username)}</h2>
        <section class="subscription">
            <h3>Details</h3>
            <ul>
                <li>You signed up with Dewy on <strong>{(currentUser.created*1000 | date:'MMMM d, yyyy')}</strong></li>
                <li ng-if="!currentUser.subscription.expired">You are on the <strong>{(currentUser.subscription.type)}</strong> plan</li>
                <li ng-if="currentUser.subscription.expired">Your subscription expired <strong>{(currentUser.subscription.endDate*1000 | date:'MMMM d, yyyy')}</strong></li>
                <li ng-if="!currentUser.subscription.expired">Your subscription expires <strong>{(currentUser.subscription.endDate*1000 | date:'MMMM d, yyyy')}</strong></li>
            </ul>
        </section>
<!--         <section class="checkout">
            <h3>Payment via Checkout</h3>
            <form action="{(stripeEndPoint)}" method="POST">
                <script
                    src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                    data-key="{(stripePublicKey)}"
                    data-name="Dewy"
                    data-description="Basic subscription"
                    data-amount="3999"
                    data-label="Sign Me Up!" >
                </script>
            </form>
        </section> -->
        <section class="card" ng-if="customer.default_source.last4">
            <h3>Card on file</h3>
            <p ng-if="!customer.error">Dewy is using the credit card ending with <strong>{(customer.default_source.last4)}</strong></p>
        </section>
        <section class="subscribe">
            <h3 ng-show="!currentUser.subscription.subscriptionID">Start your subscription</h3>
            <h3 ng-show="currentUser.subscription.subscriptionID">Update your subscription</h3>
            <form stripe:form="saveCustomer">
                <div class="plans">
                    <input type="radio" id="basic" name="plan" value="basic" ng-checked="currentUser.subscription.type == 'trial' || currentUser.subscription.type == 'basic'">
                    <label for="basic" class="basic" ng-click="setPlan('basic')">
                        <div class="plan">
                            <i class="fa fa-check-circle-o" aria-hidden="true"></i>
                            <span class="type">Basic</span>
                            <div class="price"><span class="unit">$</span><span class="dollars">39</span><span class="cents">99</span></div>
                            <span class="permonth">per month</span>
                        </div>
                        <ul class="facts">
                            <li>Unlimited sites</li>
                            <li>Site and module data</li>
                            <li>Custom site filters</li>
                        </ul>
                    </label>
                    <!-- <input type="radio" id="pro" name="plan" value="pro" ng-checked="currentUser.subscription.type == 'pro'"> -->
                    <label for="pro" class="pro">
                        <div class="plan">
                            <i class="fa fa-check-circle-o" aria-hidden="true"></i>
                            <span class="type">Pro</span>
                            <p class="price">Coming soon</p>
                        </div>
                        <ul class="facts">
                            <li>Everything in basic, plus:</li>
                            <li>Notifications</li>
                            <li>Maillist generation</li>
                        </ul>
                    </label>
                    <!-- <input type="radio" id="enterprise" name="plan" value="enterprise" ng-checked="currentUser.subscription.type == 'enterprise'"> -->
                    <label for="enterprise" class="enterprise">
                        <div class="plan">
                            <i class="fa fa-check-circle-o" aria-hidden="true"></i>
                            <span class="type">Enterprise</span>
                            <p class="price">Coming soon</p>
                        </div>
                        <ul class="facts">
                            <li>Everything in pro, plus:</li>
                            <li>API end points</li>
                            <li>Trends</li>
                        </ul>
                    </label>
                </div>
                <span class="payment-errors"></span>
                <fieldset>
                    <div class="field">
                        <label>Card Number</label>
                        <input type="text" maxlength="20" data-stripe="number">
                    </div>

                    <div class="field">
                        <label>Expiration</label>
                        <input type="text" maxlength="2" data-stripe="exp-month" placeholder="MM" class="month">
                        <input type="text" maxlength="2" data-stripe="exp-year" placeholder="YY" class="year">
                    </div>

                    <div class="field">
                        <label>CVC</label>
                        <input type="text" maxlength="4" data-stripe="cvc" class="cvc">
                    </div>
                    <span class="error" ng-show="error">{( error )}</span>
                    <button type="submit" ng-disabled="disabled">Start your {(plan)} plan<i class="fa fa-credit-card-alt" aria-hidden="true"></i></button>
                </fieldset>
            </form>
    </section>
</div>