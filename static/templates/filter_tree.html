<li class="rule-group-heading" ng-if="rule.operator">
    <select ng-model="rule.operator" ng-options="operator as operator for operator in operators"></select>
    of the following rules:
    <div class="buttons" ng-if="$parent.$index">
        <button ng-click="deleteRule(rule)"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
        </button>
        <button ng-click="addRule(rule)"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
        </button>
        <button ng-click="addRuleGroup(rule)"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>
        </button>
    </div>
</li>
<ul class="rule-group">
    <li class="rule" ng-repeat="rule in rule.rules">
        <div ng-if="rule.operator" ng-include="'templates/filter_tree.html'"></div>
        <div ng-if="!rule.operator">
            <select class="field" ng-model="rule.field" ng-options="field.title as field.title for field in fields" ng-change="updateChoice(rule)"></select>
            <select class="choice" ng-model="rule.choice" ng-options="choice as choice for choice in getChoices(rule.field)"></select>
            <input type="text" ng-model="rule.value" ng-if="valueIsType(rule.field, 'string')" required />
            <input type="number" ng-model="rule.value" ng-if="valueIsType(rule.field, 'integer')" min="0" integer required />
            <select ng-model="rule.value" ng-options="tag.id as tag.title for tag in tags" ng-if="valueIsType(rule.field, 'tag')" /></select>
            <div class="buttons">
                <button ng-click="deleteRule(rule)"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
                </button>
                <button ng-click="addRule(rule)"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                </button>
                <button ng-click="addRuleGroup(rule)"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>
                </button>
            </div>
        </div>
    </li>
</ul>